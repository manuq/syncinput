(()=>{"use strict";var t={547:(t,e)=>{e.__esModule=!0,e.Button=e.ButtonAction=void 0;var n=function(){function t(){}return t.DOWN=-1,t.UP=1,t.RESET=0,t}();e.ButtonAction=n;var o=function(){function t(){this.pressed=!1,this.justPressed=!1,this.justReleased=!1}return t.prototype.update=function(t){this.justPressed=!1,this.justReleased=!1,t===n.DOWN?(this.pressed||(this.justPressed=!0),this.pressed=!0):t===n.UP?(this.pressed&&(this.justReleased=!0),this.pressed=!1):t===n.RESET&&(this.justReleased=!1,this.justPressed=!1)},t.prototype.set=function(t,e,n){this.justPressed=t,this.pressed=e,this.justReleased=n},t.prototype.reset=function(){this.justPressed=!1,this.pressed=!1,this.justReleased=!1},t}();e.Button=o},866:(t,e)=>{e.__esModule=!0,e.EventManager=void 0;var n=function(){function t(){this.events=[]}return t.prototype.add=function(t,e,n){this.events.push([t,e,n,!1])},t.prototype.addAndCreate=function(t,e,n){t.addEventListener(e,n),this.events.push([t,e,n,!0])},t.prototype.clear=function(){this.destroy(),this.events=[]},t.prototype.remove=function(t,e){for(var n=this.events.length-1;n>=0;n--)this.events[n][0]===t&&this.events[n][1]===e&&(this.events[n][3]&&(this.events[n][0].removeEventListener(this.events[n][1],this.events[n][2]),this.events[n][3]=!1),this.events.splice(n,1))},t.prototype.create=function(){for(var t=0;t<this.events.length;t++){var e=this.events[t];e[0].addEventListener(e[1],e[2]),e[3]=!0}},t.prototype.destroy=function(){for(var t=0;t<this.events.length;t++){var e=this.events[t];e[0].removeEventListener(e[1],e[2]),e[3]=!1}},t}();e.EventManager=n},826:function(t,e,n){var o,s=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0,e.Gamepad=e.GamepadButton=void 0;var i=n(547),r=n(923),u=function(){function t(){}return t.LEFT=14,t.RIGHT=15,t.DOWN=13,t.UP=12,t.SELECT=8,t.START=9,t.HOME=16,t.LEFT_TRIGGER_A=4,t.LEFT_TRIGGER_B=6,t.RIGHT_TRIGGER_A=5,t.RIGHT_TRIGGER_B=7,t.L1=4,t.L2=6,t.L3=6,t.R1=5,t.R2=7,t.R3=11,t.A=0,t.B=1,t.C=2,t.D=3,t.X=2,t.Y=3,t.LEFT_ANALOGUE_BUT=10,t.LEFT_ANALOGUE_HOR=0,t.LEFT_ANALOGUE_VERT=1,t.RIGHT_ANALOGUE_BUT=11,t.RIGHT_ANALOGUE_HOR=2,t.RIGHT_ANALOGUE_VERT=3,t}();e.GamepadButton=u;var a=function(t){function e(){var e=t.call(this)||this;return e.vendor=-1,e.product=-1,e.connected=!1,e.index=-1,e.buttons=[],e.gamepad=null,e.initialize(),e}return s(e,t),e.prototype.initialize=function(){for(var t=navigator.getGamepads(),e=0;e<t.length;e++)if(null!==t[e]){this.setGamepad(t[e]);break}null===this.gamepad&&console.error("SyncInput: No gamepad found")},e.prototype.setGamepad=function(t){if(t){this.index=t.index,this.gamepad=t,this.buttons=[];for(var e=0;e<t.buttons.length;e++)this.buttons.push(new i.Button);this.setProductVendor(t),this.connected=!0}else console.warn("nunuStudio: No gamepad found"),this.dispose()},e.prototype.dispose=function(){this.vendor=-1,this.product=-1,this.connected=!1,this.gamepad=null,this.buttons=[]},e.prototype.setProductVendor=function(t){try{var e=t.id.split(":");return this.vendor=e[1].split(" ")[1],void(this.product=e[2].replace(" ","").replace(")",""))}catch(t){}try{return e=t.id.split("-"),this.vendor=e[0],void(this.product=e[1])}catch(t){}},e.prototype.update=function(){if(this.gamepad=navigator.getGamepads()[this.index],void 0!==this.gamepad)for(var t=0;t<this.buttons.length;t++)this.buttons[t].update(this.gamepad.buttons[t].pressed?i.ButtonAction.DOWN:i.ButtonAction.UP)},e.prototype.getAnalogueButton=function(t){return t>this.buttons.length||t<0?0:this.gamepad.buttons[t].value},e.prototype.getAxis=function(t){return t>this.gamepad.axes.length||t<0?0:this.gamepad.axes[t]},e.prototype.buttonExists=function(t){return t>=0&&t<this.buttons.length},e.prototype.buttonPressed=function(t){return!!this.buttons[t]&&this.buttons[t].pressed},e.prototype.buttonJustPressed=function(t){return!!this.buttons[t]&&this.buttons[t].justPressed},e.prototype.buttonJustReleased=function(t){return!!this.buttons[t]&&this.buttons[t].justReleased},e}(r.InputHandler);e.Gamepad=a},923:(t,e)=>{e.__esModule=!0,e.InputHandler=void 0;var n=function(){function t(){}return t.prototype.initialize=function(){},t.prototype.dispose=function(){},t}();e.InputHandler=n},126:function(t,e,n){var o,s=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0,e.Keyboard=void 0;var i=n(866),r=n(547),u=function(t){function e(e){var n=t.call(this)||this;n.keys=[],n.actions=[],n.domElement=null,n.events=null,n.keys=new Array(256),n.actions=[],n.domElement=e||window;for(var o=0;o<256;o++)n.keys[o]=new r.Button;return n.events=new i.EventManager,n.initialize(),n.events.create(),n}return s(e,t),e.prototype.initialize=function(){var t=this.actions,e=this;this.events.add(this.domElement,"keydown",(function(e){t.push(e.keyCode),t.push(r.ButtonAction.DOWN)})),this.events.add(this.domElement,"keyup",(function(e){t.push(e.keyCode),t.push(r.ButtonAction.UP)})),this.events.add(this.domElement,"focus",(function(t){e.reset()}))},e.prototype.update=function(){for(var t=0;this.actions.length>t;){var e=this.actions.shift(),n=this.actions.shift();this.keys[e].update(n),(this.keys[e].justReleased||this.keys[e].justPressed)&&(this.actions.push(e),this.actions.push(r.ButtonAction.RESET),t+=2)}},e.prototype.reset=function(){for(var t=0;t<this.keys.length;t++)this.keys[t].reset()},e.prototype.keyPressed=function(t){return this.keys[t].pressed},e.prototype.keyJustPressed=function(t){return this.keys[t].justPressed},e.prototype.keyJustReleased=function(t){return this.keys[t].justReleased},e.prototype.dispose=function(){this.events.destroy()},e}(n(923).InputHandler);e.Keyboard=u},884:(t,e)=>{e.__esModule=!0,e.Keys=void 0;var n=function(){function t(){}return t.TAB=9,t.ENTER=13,t.SHIFT=16,t.CTRL=17,t.ALT=18,t.CAPS_LOCK=20,t.ESC=27,t.SPACEBAR=32,t.PAGE_UP=33,t.PAGE_DOWN=34,t.END=35,t.HOME=36,t.INSERT=45,t.DEL=46,t.LEFT=37,t.RIGHT=39,t.UP=38,t.DOWN=40,t.NUM0=48,t.NUM1=49,t.NUM2=50,t.NUM3=51,t.NUM4=52,t.NUM5=53,t.NUM6=54,t.NUM7=55,t.NUM8=56,t.NUM9=57,t.A=65,t.B=66,t.C=67,t.D=68,t.E=69,t.F=70,t.G=71,t.H=72,t.I=73,t.J=74,t.K=75,t.L=76,t.M=77,t.N=78,t.O=79,t.P=80,t.Q=81,t.R=82,t.S=83,t.T=84,t.U=85,t.V=86,t.W=87,t.X=88,t.Y=89,t.Z=90,t.F1=112,t.F2=113,t.F3=114,t.F4=115,t.F5=116,t.F6=117,t.F7=118,t.F8=119,t.F9=120,t.F10=121,t.F11=122,t.F12=123,t}();e.Keys=n},476:function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(t,e,n,o){void 0===o&&(o=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,s)}:function(t,e,n,o){void 0===o&&(o=n),t[o]=e[n]});e.__esModule=!0,e.InputHandler=e.ButtonAction=e.Button=e.EventManager=e.Vector2=e.TouchPoint=e.Touch=e.MouseButton=e.Mouse=e.Keyboard=e.Keys=e.Gamepad=e.GamepadButton=void 0;var s=n(826);o(e,s,"GamepadButton"),o(e,s,"Gamepad"),o(e,n(884),"Keys"),o(e,n(126),"Keyboard");var i=n(290);o(e,i,"Mouse"),o(e,i,"MouseButton");var r=n(88);o(e,r,"Touch"),o(e,r,"TouchPoint"),o(e,n(601),"Vector2"),o(e,n(866),"EventManager");var u=n(547);o(e,u,"Button"),o(e,u,"ButtonAction"),o(e,n(923),"InputHandler")},290:function(t,e,n){var o,s=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0,e.Mouse=e.MouseButton=void 0;var i=n(601),r=n(866),u=n(547),a=n(923),c=function(){function t(){}return t.LEFT=0,t.MIDDLE=1,t.RIGHT=2,t.BACK=3,t.FORWARD=4,t}();e.MouseButton=c;var p=function(t){function e(e){var n=t.call(this)||this;n.positionUpdated=!1,n.wheelUpdated=!1,n.keys=new Array(5),n.position=new i.Vector2(0,0),n.wheel=0,n.delta=new i.Vector2(0,0),n.doubleClicked=!1,n.domElement=null,n.canvas=null,n.events=null,n.touchHandlers=!1,n.tempDoubleClicked=!1,n.tempWheel=0,n.tempDelta=new i.Vector2(0,0),n.tempKeys=new Array(5),n.tempPosition=new i.Vector2(0,0),n.domElement=e||window,n.events=new r.EventManager;for(var o=0;o<5;o++)n.tempKeys[o]=new u.Button,n.keys[o]=new u.Button;return n.initialize(),n.events.create(),n}return s(e,t),e.prototype.initialize=function(){var t=this;if(void 0!==window.onmousewheel?this.events.add(this.domElement,"mousewheel",(function(e){t.tempWheel=e.deltaY,t.wheelUpdated=!0,e.preventDefault()})):void 0!==window.addEventListener?this.events.add(this.domElement,"DOMMouseScroll",(function(e){t.tempWheel=30*e.detail,t.wheelUpdated=!0,e.preventDefault()})):this.events.add(this.domElement,"wheel",(function(e){t.tempWheel=e.deltaY,t.wheelUpdated=!0,e.preventDefault()})),this.touchHandlers&&("ontouchstart"in window||navigator.msMaxTouchPoints>0)){var e=new i.Vector2(0,0);this.events.add(this.domElement,"touchstart",(function(n){var o=n.touches[0];t.updatePosition(o.screenX,o.screenY,0,0),t.updateKey(c.LEFT,u.ButtonAction.DOWN),e.set(o.screenX,o.screenY)})),this.events.add(this.domElement,"touchend",(function(e){t.updateKey(c.LEFT,u.ButtonAction.UP)})),this.events.add(this.domElement,"touchcancel",(function(e){t.updateKey(c.LEFT,u.ButtonAction.UP)})),this.events.add(document.body,"touchmove",(function(n){var o=n.touches[0];t.updatePosition(o.screenX,o.screenY,o.screenX-e.x,o.screenY-e.y),e.set(o.screenX,o.screenY)}))}this.events.add(this.domElement,"mousemove",(function(e){t.updatePosition(e.offsetX,e.offsetY,e.movementX,e.movementY)})),this.events.add(this.domElement,"mousedown",(function(e){t.updateKey(e.which-1,u.ButtonAction.DOWN)})),this.events.add(this.domElement,"mouseup",(function(e){t.updateKey(e.which-1,u.ButtonAction.UP)})),this.events.add(this.domElement,"mouseleave",(function(e){t.updateKey(e.which-1,u.ButtonAction.UP)})),this.events.add(this.domElement,"dragstart",(function(e){t.updateKey(e.which-1,u.ButtonAction.UP)})),this.events.add(this.domElement,"dblclick",(function(e){t.tempDoubleClicked=!0}))},e.prototype.setCanvas=function(t){this.canvas=t,t.mouseInside=!1,t.addEventListener("mouseenter",(function(t){this.mouseInside=!0})),t.addEventListener("mouseleave",(function(t){this.mouseInside=!1}))},e.prototype.insideCanvas=function(){return null!==this.canvas&&this.canvas.mouseInside},e.prototype.setLock=function(t){null!==this.canvas&&(t?this.canvas.requestPointerLock?this.canvas.requestPointerLock():this.canvas.mozRequestPointerLock?this.canvas.mozRequestPointerLock():this.canvas.webkitRequestPointerLock&&this.canvas.webkitRequestPointerLock():document.exitPointerLock?document.exitPointerLock():document.mozExitPointerLock?document.mozExitPointerLock():document.webkitExitPointerLock&&document.webkitExitPointerLock())},e.prototype.buttonPressed=function(t){return this.keys[t].pressed},e.prototype.buttonDoubleClicked=function(){return this.doubleClicked},e.prototype.buttonJustPressed=function(t){return this.keys[t].justPressed},e.prototype.buttonJustReleased=function(t){return this.keys[t].justReleased},e.prototype.updatePosition=function(t,e,n,o){this.tempPosition.set(t,e),this.tempDelta.x+=n,this.tempDelta.y+=o,this.positionUpdated=!0},e.prototype.updateKey=function(t,e){t>-1&&this.tempKeys[t].update(e)},e.prototype.update=function(){for(var t=0;t<this.tempKeys.length;t++)this.tempKeys[t].justPressed&&this.keys[t].justPressed&&(this.tempKeys[t].justPressed=!1),this.tempKeys[t].justReleased&&this.keys[t].justReleased&&(this.tempKeys[t].justReleased=!1),this.keys[t].set(this.tempKeys[t].justPressed,this.tempKeys[t].pressed,this.tempKeys[t].justReleased);this.wheelUpdated?(this.wheel=this.tempWheel,this.wheelUpdated=!1):this.wheel=0,this.tempDoubleClicked?(this.doubleClicked=!0,this.tempDoubleClicked=!1):this.doubleClicked=!1,this.positionUpdated?(this.delta.copy(this.tempDelta),this.position.copy(this.tempPosition),this.tempDelta.set(0,0),this.positionUpdated=!1):(this.delta.x=0,this.delta.y=0)},e.prototype.dispose=function(){this.events.destroy()},e}(a.InputHandler);e.Mouse=p},88:function(t,e,n){var o,s=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0,e.Touch=e.TouchPoint=void 0;var i=n(601),r=n(866),u=n(547),a=n(923),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=new i.Vector2,e.delta=new i.Vector2,e.first=new i.Vector2,e.radius=new i.Vector2,e.force=0,e.rotation=0,e}return s(e,t),e}(u.Button);e.TouchPoint=c;var p=function(){this.action=u.ButtonAction.UP,this.first=new i.Vector2,this.position=new i.Vector2,this.last=new i.Vector2,this.force=0,this.radius=new i.Vector2,this.rotation=0},d=function(t){function e(e,n){void 0===e&&(e=3);var o=t.call(this)||this;return o.maxPoints=3,o.points=[],o.temp=[],o.domElement=null,o.events=null,o.pinch=null,o.domElement=void 0!==n?n:window,o.maxPoints=e,o.points=new Array(o.maxPoints).fill(null).map((function(){return new c})),o.temp=new Array(o.maxPoints).fill(null).map((function(){return new p})),o.events=new r.EventManager,o.initialize(),o.events.create(),o}return s(e,t),e.prototype.initialize=function(){var t=this;this.events.add(this.domElement,"touchstart",(function(e){for(var n=0;n<e.changedTouches.length;n++){var o=e.changedTouches[n];if(!(o.identifier>=t.maxPoints)){var s=new i.Vector2(o.screenX,o.screenY);t.temp[o.identifier].first.copy(s),t.temp[o.identifier].last.copy(s),t.updatePoint(o.identifier,u.ButtonAction.DOWN,o.force,o.rotationAngle,s,new i.Vector2(o.radiusX,o.radiusY))}}})),this.events.add(this.domElement,"touchend",(function(e){for(var n=0;n<e.changedTouches.length;n++){var o=e.changedTouches[n];o.identifier>=t.maxPoints||t.updatePoint(o.identifier,u.ButtonAction.UP,o.force,o.rotationAngle,new i.Vector2(o.screenX,o.screenY),new i.Vector2(o.radiusX,o.radiusY))}})),this.events.add(this.domElement,"touchcancel",(function(e){for(var n=0;n<e.changedTouches.length;n++){var o=e.changedTouches[n];o.identifier>=t.maxPoints||t.updatePoint(o.identifier,u.ButtonAction.UP,o.force,o.rotationAngle,new i.Vector2(o.screenX,o.screenY),new i.Vector2(0,0))}})),this.events.add(document.body,"touchmove",(function(e){for(var n=0;n<e.changedTouches.length;n++){var o=e.changedTouches[n];o.identifier>=t.maxPoints||t.updatePoint(o.identifier,u.ButtonAction.DOWN,o.force,o.rotationAngle,new i.Vector2(o.screenX,o.screenY),new i.Vector2(o.radiusX,o.radiusY))}}))},e.prototype.updatePoint=function(t,e,n,o,s,i){this.temp[t].force=n,this.temp[t].rotation=o,this.temp[t].position.copy(s),this.temp[t].radius.copy(i),this.temp[t].action=e},e.prototype.update=function(){var t=null;this.points[0].pressed&&this.points[1].pressed&&(t=this.points[0].position.dist(this.points[1].position));for(var e=0;e<this.temp.length;e++)this.points[e].force=this.temp[e].force,this.points[e].rotation=this.temp[e].rotation,this.points[e].radius.copy(this.temp[e].radius),this.points[e].position.copy(this.temp[e].position),this.points[e].delta.set(this.temp[e].position.x-this.temp[e].last.x,this.temp[e].position.y-this.temp[e].last.y),this.points[e].update(this.temp[e].action),this.points[e].justPressed&&this.points[e].first.copy(this.temp[e].first),this.temp[e].last.copy(this.temp[e].position);t&&this.points[0].pressed&&this.points[1].pressed?this.pinch=this.points[0].position.dist(this.points[1].position)-t:this.pinch=null},e.prototype.pan=function(t){for(var e=new i.Vector2,n=new i.Vector2,o=0,s=0;s<this.points.length;s++)this.points[s].pressed&&(e.add(this.points[s].position),n.add(this.points[s].delta),o++);return o===t?(e.divScalar(t),n.divScalar(t),{position:e,delta:n}):null},e.prototype.pinchZoom=function(){return this.pinch},e.prototype.touchPressed=function(t){return this.points[t].pressed},e.prototype.touchJustPressed=function(t){return this.points[t].justPressed},e.prototype.touchJustReleased=function(t){return this.points[t].justReleased},e.prototype.dispose=function(){this.events.destroy()},e}(a.InputHandler);e.Touch=d},601:(t,e)=>{e.__esModule=!0,e.Vector2=void 0;var n=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){this.x=t,this.y=e},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.add=function(t){this.x=t.x,this.y=t.y},t.prototype.divScalar=function(t){this.x/=t,this.y/=t},t.prototype.dist=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t}();e.Vector2=n}},e={};!function n(o){var s=e[o];if(void 0!==s)return s.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}(476)})();